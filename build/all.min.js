!function(a,b){"function"==typeof define&&define.amd?define(b):"object"==typeof exports?module.exports=b():a.returnExports=b()}(this,function(){var isIE=!!window.ActiveXObject,isIE6=isIE&&!window.XMLHttpRequest,isIE8=isIE&&!!document.documentMode,isIE7=isIE&&!isIE6&&!isIE8,isIE68=isIE6||isIE7||isIE8;window.bs_patch=function(){return window.hasOwnProperty=window.hasOwnProperty||Object.prototype.hasOwnProperty,Object.defineProperty&&!isIE68?function(a,b,c,d){(c&&"undefined"==typeof b[c]||d)&&Object.defineProperty(b,c,{enumerable:!1,configurable:!0,writable:!1,value:a})}:function(a,b,c,d){(c&&"undefined"==typeof b[c]||d)&&(b[c]=a)}}();var patch=window.bs_patch;window.bs_patches=function(a,b){for(var c in a)a!==window&&a.hasOwnProperty(c)&&patch(a[c],b,c)};var patches=window.bs_patches;patches({of:function(){return Array.prototype.slice.call(arguments)},isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)}},Array),patches({entries:function(){return Iterator(this)},every:function(a){"use strict";if(void 0===this||null===this)throw new TypeError;var b=Object(this),c=b.length>>>0;if("function"!=typeof a)throw new TypeError;for(var d=arguments.length>=2?arguments[1]:void 0,e=0;c>e;e++)if(e in b&&!a.call(d,b[e],e,b))return!1;return!0},fill:function(a){for(var b=Object(this),c=parseInt(b.length),d=arguments[1],e=parseInt(d)||0,f=0>e?Math.max(c+e,0):Math.min(e,c),g=arguments[2],h=void 0===g?c:parseInt(g)||0,i=0>h?Math.max(c+h,0):Math.min(h,c);i>f;f++)b[f]=a;return b},filter:function(a){"use strict";if(void 0===this||null===this)throw new TypeError;var b=Object(this),c=b.length>>>0;if("function"!=typeof a)throw new TypeError;for(var d=[],e=arguments.length>=2?arguments[1]:void 0,f=0;c>f;f++)if(f in b){var g=b[f];a.call(e,g,f,b)&&d.push(g)}return d},find:function(a,b){var c=this.findIndex(a,b);return c>=0?this[c]:void 0},findIndex:function(a,b){if("function"!=typeof a)throw new TypeError("filter must be a function");for(var c,d=Object(this),e=d.length>>>0,f=0;e>f;f++)if(f in d&&(c=d[f],a.call(b,c,f,d)))return f;return-1},keys:function(){var a=Iterator(this);return a.next=function(){var a=this.iterator[this.current++];if(this.current>this.length)throw new Error("stop iterate");return{value:a[0],done:this.current>=this.length}},a},forEach:function(a,b){var c,d;if(null==this)throw new TypeError("this is null or undefined");var e=Object(this),f=e.length>>>0;if("function"!=typeof a)throw new TypeError("callback is not a function");for(b&&(c=b),d=0;f>d;){var g;d in e&&(g=e[d],a.call(c,g,d,e)),d++}},copyWithin:function(a,b){var c=Object(this),d=parseInt(c.length),e=parseInt(a),f=0>e?Math.max(d+e,0):Math.min(e,d),g=parseInt(b),h=0>g?Math.max(d+g,0):Math.min(g,d),i=arguments[2],j=void 0===i?d:parseInt(i),k=0>j?Math.max(d+j,0):Math.min(j,d),l=Math.min(k-h,d-f);if(f>h&&h+l>f)for(h=h+l-1,f=f+l-1;l>0;)h in c?c[f]=c[h]:delete c[f],h--,f--,l--;else for(;l>0;)h in c?c[f]=c[h]:delete c[f],h++,f++,l--;return c},indexOf:function(a,b){if(void 0===this||null===this)throw new TypeError('"this" is null or not defined');var c=this.length>>>0;for(b=+b||0,1/0===Math.abs(b)&&(b=0),0>b&&(b+=c,0>b&&(b=0));c>b;b++)if(this[b]===a&&b in this)return b;return-1},lastIndexOf:function(a){"use strict";if(void 0===this||null===this)throw new TypeError;var b,c,d=Object(this),e=d.length>>>0;if(0===e)return-1;for(b=e-1,arguments.length>1&&(b=Number(arguments[1]),b!=b?b=0:0!=b&&b!=1/0&&b!=-(1/0)&&(b=(b>0||-1)*Math.floor(Math.abs(b)))),c=b>=0?Math.min(b,e-1):e-Math.abs(b);c>=0;c--)if(c in d&&d[c]===a)return c;return-1},map:function(a,b){var c,d,e;if(null==this)throw new TypeError(" this is null or not defined");var f=Object(this),g=f.length>>>0;if("function"!=typeof a)throw new TypeError(a+" is not a function");for(b&&(c=b),d=new Array(g),e=0;g>e;){var h,i;if(e in f){var j=e.toString();h=f[j],i=a.call(c,h,e,f),d[j]=i}e++}return d},reduce:function(a){"use strict";if(null===this||"undefined"==typeof this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof a)throw new TypeError(a+" is not a function");var b,c=Object(this),d=c.length>>>0,e=0;if(arguments.length>=2)b=arguments[1];else{for(;d>e&&!e in c;)e++;if(e>=d)throw new TypeError("Reduce of empty array with no initial value");b=c[e++]}for(;d>e;e++)e in c&&(b=a(b,c[e],e,c));return b},reduceRight:function(a){"use strict";if(null===this||"undefined"==typeof this)throw new TypeError("Array.prototype.reduce called on null or undefined");if("function"!=typeof a)throw new TypeError(a+" is not a function");var b,c=Object(this),d=c.length>>>0,e=d-1;if(arguments.length>=2)b=arguments[1];else{for(;e>=0&&!e in c;)e--;if(0>e)throw new TypeError("Reduce of empty array with no initial value");b=c[e--]}for(;e>=0;e--)e in c&&(b=a(b,c[e],e,c));return b},some:function(a){"use strict";if(void 0===this||null===this)throw new TypeError;var b=Object(this),c=b.length>>>0;if("function"!=typeof a)throw new TypeError;for(var d=arguments.length>=2?arguments[1]:void 0,e=0;c>e;e++)if(e in b&&a.call(d,b[e],e,b))return!0;return!1}},Array.prototype),patch(function(){var a=Array.prototype.unshift;return function(){return a.apply(this,arguments),this.length}}(),Array.prototype,"unshift",isIE68),patch(function(){var a=Array.prototype.join;return function(b){return"undefined"==typeof b&&(b=","),a.apply(this,[b])}}(),Array.prototype,"join",isIE68),patches({now:function(){return(new Date).getTime()}},Date),patches({parse:function(){var a=/^(\d{4}|\+\d{6})(?:-(\d{2})(?:-(\d{2})(?:T(\d{2}):(\d{2}):(\d{2})\.(\d{1,})(Z|([\-+])(\d{2}):(\d{2}))?)?)?)?$/,b=Date.parse,c=-(new Date).getTimezoneOffset(),d=Math.floor(c/60),e=c%60;return function(c){var f=a.exec(c);return f?Date.UTC(f[1],(f[2]||1)-1,f[3]||1,f[4]-(f[8]?f[9]?f[9]+f[10]:0:d)||0,f[5]-(f[8]?f[9]?f[9]+f[11]:0:e)||0,f[6]||0,((f[7]||0)+"00").substr(0,3)):b.apply(this,arguments)}}()},Date,"parse",isIE),patches({toISOString:function(){function a(a){return 10>a?"0"+a:a}return function(){return this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"."+(this.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}}(),toJSON:function(){return this.toISOString()}},Date.prototype),patch(function(a){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d&&a?this:a,b.concat(Array.prototype.slice.call(arguments)))};return d.prototype=this.prototype,e.prototype=new d,e},Function.prototype,"bind"),patch(function(a){var b=function(){this.length=0,this.current=0,this.source=arguments[0]||[],this.iterator=[];for(var a in this.source)this.source.hasOwnProperty(a)&&this.iterator.push([a,this.source[a]]);this.length=this.iterator.length,this.next=function(){var a=this.iterator[this.current];if(this.current>=this.length)throw new Error("stop iterate");return[this.current++,a]}};return new b(a)},window,"Iterator"),patch({},window,"JSON"),patches({parse:function(json){return eval("1,"+json)},stringify:function(){function a(f){for(var g="[",h=0;h<f.length;h++){var i=Object.prototype.toString.call(f[h]);g+=i==c?a(f[h]):i==d?b(f[h]):i==e?'"'+f[h]+'"':f[h],h<f.length-1&&(g+=",")}return g+="]"}function b(f){var g="{";for(var h in f)if(f.hasOwnProperty(h)){g+='"'+h+'":';var i=Object.prototype.toString.call(f[h]);g+=i==c?a(f[h]):i==d?b(f[h]):i==e?'"'+f[h]+'"':f[h],g+=","}return g=(g.length>1?g.substring(0,g.length-1):g)+"}"}var c="[object Array]",d="[object Object]",e="[object String]";return function(f){var g="",h=Object.prototype.toString.call(f);return h==c?a(f):h==d?b(f):h==e?'"'+f+'"':g+=f}}()},window.JSON),patch(function(){var a=function(){this.__source__=[],this.size=0};return a}(),window,"Map"),patches({"delete":function(a){var b=this.__source__findIndex(function(b){return b[0]===a});return b>=0&&this.__source__.splice(b,1),this.size=this.__source__.length,this},clear:function(){return this.__source__=[],this.size=0,this},entries:function(){return Iterator(this)},forEach:function(a,b){return this.__source__.forEach(a,b),this},get:function(a){var b=this.__source__.findIndex(function(b){return b[0]===a});return b>=0?this.__source__[b][1]:void 0},has:function(a){return this.__source__.findIndex(function(b){return b[0]===a})>=0},keys:function(){var a=Iterator(this);return a.current=0,a.next=function(){var a=this.iterator[this.current++];if(this.current>this.length)throw new Error("stop iterate");return{value:a[0],done:this.current>=this.length}},a},set:function(a,b){var c=[a,b],d=this.__source__.findIndex(function(b){return b[0]===a});return d>=0?this.__source__[d]=c:this.__source__.push(c),this.size=this.__source__.length,this},values:function(){var a=Iterator(this);return a.current=0,a.next=function(){var a=this.iterator[this.current++];if(this.current>this.length)throw new Error("stop iterate");return{value:a[1],done:this.current>=this.length}},a}},Map.prototype),patches({acosh:function(a){return Math.log(a+Math.sqrt(a*a-1))},asinh:function(a){return Math.log(a+Math.sqrt(a*a+1))},atanh:function(a){return Math.log((1+a)/(1-a))/2},cbrt:function(a){var b=Math.pow(Math.abs(a),1/3);return 0>a?-b:b},clz32:function(a){var a=Number(a)>>>0;return a?32-a.toString(2).length:32},cosh:function(a){return(Math.exp(a)+Math.exp(-a))/2},expm1:function(a){return Math.exp(a)-1},fround:function(){return"undefined"!=typeof window.Float32Array?function(a){var b=new Float32Array(1);return b[0]=a,b[0]}:function(a){for(var b=[],c=a.toString(2),d=0>a?1:0,e=c.indexOf("."),f="0"==c.charAt(0)?Math.max(c.indexOf("1",e)-e,0):0,g=0,h=Math.max(c.indexOf("1"),0);h<c.length&&b.length<23;h++){var i=c.charAt(h);("1"==i||"0"==i)&&b.push(1*i)}for(var h=1;h<b.length;h++)g+=b[h]*Math.pow(2,-1*h);return Math.pow(-1,d)*(1*b[0]+g)*Math.pow(2,-1*f)}}(),hypot:function(){for(var a=0,b=arguments.length,c=0;b>c;c++)a+=arguments[c]*arguments[c];return Math.sqrt(a)},imul:function(a,b){var c=a>>>16&65535,d=65535&a,e=b>>>16&65535,f=65535&b;return d*f+(c*f+d*e<<16>>>0)|0},log10:function(a){return Math.log(a)/Math.LN10},log1p:function(a){return Math.log(1+a)},log2:function(a){return Math.log(a)/Math.LN2},sign:function(a){return a=1*a,+a===a?0===a?a:a>0?1:-1:0/0},sinh:function(a){return(Math.exp(a)-Math.exp(-a))/2},tanh:function(a){return 1/0==a?1:(Math.exp(a)-Math.exp(-a))/(Math.exp(a)+Math.exp(-a))},trunc:function(a){return 0>a?Math.ceil(a):Math.floor(a)}},Math),patches({EPSILON:2.220446049250313e-16,MAX_VALUE:1.7976931348623157e308,MIN_VALUE:5e-324,MAX_SAFE_VALUE:9007199254740992,MIN_SAFE_VALUE:-9007199254740992,NEGATIVE_INFINITY:-1/0,POSITIVE_INFINITY:1/0,NaN:0/0,isFinite:function(a){return"number"==typeof a?window.isFinite(a):!1},isInteger:function(a){return"number"==typeof a&&isFinite(a)&&a>Number.MIN_SAFE_VALUE&&a<Number.MAX_SAFE_VALUE&&Math.floor(a)===a},isNaN:isNaN,parseFloat:parseFloat,parseInt:parseInt,toInteger:function(a){return 0|a}},Number),patches({seal:function(a){return a},freeze:function(a){return a},preventExtensions:function(a){return a},isSealed:function(){return!1},isFrozen:function(){return!1},setPrototypeOf:function(a,b){return a.__proto__=b,a},is:function(a,b){return 0===a&&0===b?1/a===1/b:a!==a?b!==b:a===b},create:function(){var a,b=!({__proto__:null}instanceof Object);return a=b||"undefined"==typeof document?function(){return{__proto__:null}}:function(){function b(){}var c=document.createElement("iframe"),d=document.body||document.documentElement;c.style.display="none",d.appendChild(c),c.src="javascript:;";var e=c.contentWindow.Object.prototype;return d.removeChild(c),c=null,delete e.constructor,delete e.hasOwnProperty,delete e.proprtyIsEnumerable,delete e.isPrototypeOf,delete e.toLocaleString,delete e.toString,delete e.valueOf,e.__proto__=null,b.prototype=e,a=function(){return new b},new b},function(b,c){function d(){}var e;if(null===b)e=a();else{if("object"!=typeof b&&"function"!=typeof b)throw new Error("prototype must be an Object");d.prototype=b,e=new d,e.__proto__=b}return void 0!==c&&patches(c,e),e}}(),getOwnPropertyNames:function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(c);return b},getPrototypeOf:function(){return"object"==typeof"test".__proto__?function(a){return a.__proto__}:function(a){return a.constructor.prototype}}()},Object),patch(function(){"use strict";var a=Object.prototype.hasOwnProperty,b=!{toString:null}.propertyIsEnumerable("toString"),c=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],d=c.length;return function(e){if("object"!=typeof e&&("function"!=typeof e||null===e))throw new TypeError("Object.keys called on non-object");var f,g,h=[];for(f in e)a.call(e,f)&&h.push(f);if(b)for(g=0;d>g;g++)a.call(e,c[g])&&h.push(c[g]);return h}}(),Object,"keys"),patch(function(){var a;return a=function(){}}(),window,"Proxy"),patch(function(){var a=function(b){function c(b,c){setTimeout(function(){for(;f.length;){var g=f.shift();if("function"==typeof g[b]){var h=g[b](c);return h&&"function"==typeof h.then?h.then(d,e):a.resolve(h).then(d,e)}}},1)}function d(a){c(0,a)}function e(a){c(1,a)}var f=[];b(d,e),this.then=function(a,b){return f.push([a,b]),this},this.chain=this.then,this["catch"]=function(a){return this.then(void 0,a)}};return a.deferred=function(){var b=[];return b.promise=new a(function(a,c){b.resolve=a,b.reject=c}),b},a.resolve=a.cast=function(b){return new a(function(a){a(b)})},a.reject=function(b){return new a(function(a,c){c(b)})},a.all=function(b){function c(a,b){g[b]=a,f--,0==f&&e.resolve(g)}function d(a){e.reject(a)}var e=a.deferred(),f=b.length,g=[];return b.forEach(function(b,e){return b instanceof a?void b.then(function(a){c(a,e)},function(a){d(a)}):void c(b,e)}),e.promise},a.race=function(b){function c(a){f&&(e.resolve(a),f=!1)}function d(a){f&&(e.reject(a),f=!1)}var e=a.deferred(),f=!0;return b.forEach(function(b,e){return b instanceof a?void b.then(function(a){c(a,e)},function(a){d(a)}):void c(b,e)}),e.promise},a}(),window,"Promise"),patches({defer:window.Promise.deferred},window.Promise),patch(function(){var a=function(){this.__source__=[],this.size=0};return patches({"delete":function(a){var b=this.__source__findIndex(function(b){return b===a});return b>=0&&this.__source__.splice(b,1),this.size=this.__source__.length,this},clear:function(){return this.__source__=[],this.size=0,this},entries:function(){return Iterator(this)},forEach:function(a,b){return this.__source__.forEach(a,b),this},has:function(a){return this.__source__.findIndex(function(b){return b===a})>=0},add:function(a){return this.__source__.push(a),this},values:function(){var a=Iterator(this);return a.current=0,a.next=function(){var a=this.iterator[this.current++];if(this.current>this.length)throw new Error("stop iterate");return{value:a,done:this.current>=this.length}},a}},a.prototype),a}(),window,"Set"),patches({codePointAt:function(a){"use strict";if(null==this)throw TypeError();var b=String(this),c=b.length,d=a?Number(a):0;if(d!=d&&(d=0),0>d||d>=c)return void 0;var e,f=b.charCodeAt(d);return f>=55296&&56319>=f&&c>d+1&&(e=b.charCodeAt(d+1),e>=56320&&57343>=e)?1024*(f-55296)+e-56320+65536:f},contains:function(){return-1!==String.prototype.indexOf.apply(this,arguments)},endsWith:function(){"use strict";var a={}.toString;return function(b){if(null==this)throw TypeError();var c=String(this);if(b&&"[object RegExp]"==a.call(b))throw TypeError();var d=c.length,e=String(b),f=e.length,g=d;if(arguments.length>1){var h=arguments[1];void 0!==h&&(g=h?Number(h):0,g!=g&&(g=0))}var i=Math.min(Math.max(g,0),d),j=i-f;if(0>j)return!1;for(var k=-1;++k<f;)if(c.charCodeAt(j+k)!=e.charCodeAt(k))return!1;return!0}}(),repeat:function(a){if("number"!=typeof a)throw new TypeError;if(!isFinite(a)||0>a)throw new RangeError;a=0|a;for(var b="",c=0;a>c;c++)b+=this.toString();return b},startsWith:function(a){var b={}.toString;if(null==this)throw TypeError();var c=String(this);if(a&&"[object RegExp]"==b.call(a))throw TypeError();var d=c.length,e=String(a),f=e.length,g=arguments.length>1?arguments[1]:void 0,h=g?Number(g):0;h!=h&&(h=0);var i=Math.min(Math.max(h,0),d);if(f+i>d)return!1;for(var j=-1;++j<f;)if(c.charCodeAt(i+j)!=e.charCodeAt(j))return!1;return!0},trim:function(){return this.trimLeft().trimRight()},trimLeft:function(){return this.replace(/^\s+/g,"")},trimRight:function(){return this.replace(/\s+$/g,"")}},String.prototype),patches({fromCodePoint:function(){var a=String.fromCharCode,b=Math.floor;return function(){var c,d,e=16384,f=[],g=-1,h=arguments.length;if(!h)return"";for(var i="";++g<h;){var j=Number(arguments[g]);if(!isFinite(j)||0>j||j>1114111||b(j)!=j)throw RangeError("Invalid code point: "+j);65535>=j?f.push(j):(j-=65536,c=(j>>10)+55296,d=j%1024+56320,f.push(c,d)),(g+1==h||f.length>e)&&(i+=a.apply(null,f),f.length=0)}return i}}()},String),patches({unique:function(){for(var a=0;a<this.length;a++)for(var b=this[a],c=this.length-1;c>a;c--)this[c]==b&&this.splice(c,1);return this},max:function(){return this.reduce(function(a,b){return a>b?a:b})},min:function(){return this.reduce(function(a,b){return b>a?a:b})},pluck:function(a){var b=[];return this.forEach(function(c){c.hasOwnProperty(a)&&b.push(c[a])}),b},group:function(a){var b={};return this.pluck(a).forEach(function(c){c.hasOwnProperty(a)&&(b.hasOwnProperty(c[a])||(b[c[a]]=[]),b[c[a]].push(c))}),b},flatten:function(){return this.reduce(function(a,b){return a.is("Array")||(a=[a]),b.is("Array")&&(b=b.flatten()),a.concat(b)})},contain:function(a){for(var b=0;b<this.length;b++)if(this[b]===a)return!0;return!1},sample:function(a){a=1*a||1;var b=[].concat(this),c=[];for(a=a>b.length?b.length:a;a>0;){var d=Number.random(0,b.length);b.swap(d,b.length-1),c.push(b.pop())}return c},shuffle:function(){return this.sample(this.length)},eq:function(a){return this[a]},compact:function(){return this.filter(function(a){return!!a})},swap:function(a,b){var c=this[a];return this[a]=this[b],this[b]=c,this},first:function(){return this[0]},last:function(){return this[this.length-1>-1?this.length-1:0]}},Array.prototype),patches({getDaysInMonth:function(a,b){return[31,Date.isLeapYear(a)?29:28,31,30,31,30,31,31,30,31,30,31][b]},compare:function(a,b){if(isNaN(a)||isNaN(b))throw new TypeError(a+"-"+b);if(a instanceof Date&&b instanceof Date)return b>a?-1:a>b?1:0;throw new TypeError(a+"-"+b)},equal:function(a,b){return!Date.compare(a,b)},today:function(){return(new Date).clearTime()},isLeapYear:function(a){return a%4===0&&a%100!==0||a%400===0}},Date),patches({clearTime:function(){return this.setHours(0),this.setMinutes(0),this.setSeconds(0),this.setMilliseconds(0),this},clone:function(){return new Date(this.getTime())},compareTo:function(a){return Date.compare(this,a)},isEqual:function(a){return Date.equal(this,a)},isAfter:function(a){return Date.compare(this,a)>0},isBefore:function(a){return Date.compare(this,a)<0},getWeek:function(){var a,b,c,d,e,f,g,h,i,j,k,l,m;return k=k?k:this.getFullYear(),l=l?l:this.getMonth()+1,m=m?m:this.getDate(),2>=l?(a=k-1,b=(a/4|0)-(a/100|0)+(a/400|0),c=((a-1)/4|0)-((a-1)/100|0)+((a-1)/400|0),i=b-c,e=0,f=m-1+31*(l-1)):(a=k,b=(a/4|0)-(a/100|0)+(a/400|0),c=((a-1)/4|0)-((a-1)/100|0)+((a-1)/400|0),i=b-c,e=i+1,f=m+(153*(l-3)+2)/5+58+i),g=(a+b)%7,d=(f+g-e)%7,h=f+3-d|0,j=0>h?53-((g-i)/5|0):h>364+i?1:(h/7|0)+1,k=l=m=null,j},addSeconds:function(a){return this.setSeconds(this.getSeconds()+a),this},addMinutes:function(a){return this.addSeconds(60*a)},addHours:function(a){return this.addMinutes(60*a)},addDays:function(a){return this.addHours(24*a)},addWeeks:function(a){return this.addDays(7*a)},addMonths:function(a){var b=this.getDate();return this.setDate(1),this.setMonth(this.getMonth()+1*a),this.setDate(Math.min(b,Date.getDaysInMonth(this.getFullYear(),this.getMonth()))),this},addYears:function(a){return this.addMonths(12*a)},add:function(a){if("number"==typeof a)return this;var b=a;return b.seconds&&this.addSeconds(b.seconds),b.minutes&&this.addMinutes(b.minutes),b.hours&&this.addHours(b.hours),b.weeks&&this.addWeeks(b.weeks),b.months&&this.addMonths(b.months),b.years&&this.addYears(b.years),b.days&&this.addDays(b.days),this}},Date.prototype),patches({memoize:function(a){var b={},c=this;return a=a||function(a){return a},function(){var d=a.apply(this,arguments);return Object.prototype.hasOwnProperty.call(b,d)?b[d]:b[d]=c.apply(this,arguments)}},debounce:function(a){var b,c=this;return function(){return b=this.__debounce_id__,clearTimeout(b),this.__debounce_id__=c.timeout(a),this}},throttle:function(a){var b,c=this;return function(){var d=this;return b=d.__throttle_id__,b||(d.__throttle_id__=c.cut({after:function(){d.__throttle_id__=0}}).timeout(a)),this}},cut:function(a){var b=this;return function(){a&&a.before&&a.before.call(null),b.apply(null,arguments),a&&a.after&&a.after.call(null)}},timeout:function(a){return setTimeout(this,a)},interval:function(a){return setInterval(this,a)},defer:function(){return this.timeout(1)},singleton:function(){if("undefined"==typeof this.__initialize__){var a=arguments||[];this.__initialize__=this.apply(null,a)}return this.__initialize__}},Function.prototype);var prettyNumber=function(a,b,c){c=c||",",b=b||2;var d="";if(a.isNaN()||a.isFinite())d="N/A";else{var e=a.valueOf().toFixed(b),f=b?e.substring(e.indexOf(".")):"",g=parseInt(a,10),h=1e3;for(d=[];g>=h;){var i=g%h;d.unshift(i.fill(3)),g=(g-i)/h}g&&d.unshift(g),d=d.join(c),d+=f}return d},prettyTime=function(a,b){b=b||["s","m","h","d"];var c=Date.now(),d=Math.abs(Math.round((c-a)/1e3)),e=[d%60,Math.floor(d%3600/60),Math.floor(d%86400/3600),Math.floor(d/86400)];for(e[4]>3&&(e[4]=3);e.length&&"undefined"!=typeof e[e.length-1]&&e[e.length-1]<=0;)e.splice(e.length-1,1);var f="";return e.forEach(function(a,c){f=a+b[c]+f}),f},prettyTraffic=function(a,b){b=b||["b","kb","mb","gb","tb"];for(var c=[],d=0;d<b.length;d++)c.push(Math.round(a/Math.pow(1e3,d)));for(var e="0"+b[0];c.length&&"undefined"!=typeof c[c.length-1];){if(c[c.length-1]>0){e=c[c.length-1]+b[c.length-1];break}c.pop()}return e};patches({min:function(a){return Math.min(this,a)},max:function(a){return Math.max(this,a)},step:function(a,b){var c=this.min(a),d=this.max(a);if(b&&"function"==typeof b)for(var e=c;d>=e;e++)b.call(this,e);return this},isNaN:function(){return Number.isNaN(this)},isFinite:function(){return Number.isFinite(this)},isZero:function(){return this.isNaN()||this.isFinite()||!!this.valueOf()},pretty:function(a){for(var b=[this],c=1;c<arguments.length;c++)b.push(arguments[c]);a=a||"number";var d=this.toString();switch(a){case"number":d=prettyNumber.apply(null,b);break;case"time":d=prettyTime.apply(null,b);break;case"traffic":d=prettyTraffic.apply(null,b)}return d},fill:function(a,b){b=b||"0";for(var c=this.toString();c.length<a;)c=b+c;return c},clearTimeout:function(){return clearTimeout(this)},clearInterval:function(){return clearInterval(this)},isBetween:function(a,b){var c=a.min(b),d=a.max(b);return this>=c&&d>=this}},Number.prototype),patches({guid:function(a){for(var b="",a=a||32;a--;)b+=Math.floor(16*Math.random()).toString(16);return b},unique:function(){},step:function(a,b,c){return a.step(b,c)},random:function(a,b){a=a||0,b=b||0;var c=a.min(b),d=a.max(b);return Math.floor(c+Math.random()*(d-c))}},Number);var eq=function(a,b,c,d){if(a===b)return 0!==a||1/a==1/b;if(null==a||null==b)return a===b;var e=Object.prototype.toString.call(a);if(e!=Object.prototype.toString.call(b))return!1;switch(e){case"[object String]":return a==String(b);case"[object Number]":return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case"[object Date]":case"[object Boolean]":return+a==+b;case"[object RegExp]":return a.source==b.source&&a.global==b.global&&a.multiline==b.multiline&&a.ignoreCase==b.ignoreCase}if("object"!=typeof a||"object"!=typeof b)return!1;for(var f=c.length;f--;)if(c[f]==a)return d[f]==b;var g=a.constructor,h=b.constructor;if(g!==h&&!(_.isFunction(g)&&g instanceof g&&_.isFunction(h)&&h instanceof h)&&"constructor"in a&&"constructor"in b)return!1;c.push(a),d.push(b);var i=0,j=!0;if("[object Array]"==e){if(i=a.length,j=i==b.length)for(;i--&&(j=eq(a[i],b[i],c,d)););}else{for(var k in a)if(a.hasOwnProperty(k)&&(i++,!(j=b.hasOwnProperty(k)&&eq(a[k],b[k],c,d))))break;if(j){for(k in b)if(b.hasOwnProperty(k)&&!i--)break;j=!i}}return c.pop(),d.pop(),j};patches({is:function(a){return Object.prototype.toString.call(this)=="[object "+a+"]"},isEmpty:function(){if(this.is("Object")){for(var a in this)if(this.hasOwnProperty(a))return!1;return!0}return this.hasOwnProperty("length")?this.length?!1:!0:!!this.toString()},clone:function(){var a;a=this.constructor==Object?new this.constructor:new this.constructor(this.valueOf());for(var b in this)a[b]!=this[b]&&(a[b]="object"==typeof this[b]?this[b].clone():this[b]);return a.valueOf=this.valueOf,a},equal:function(a){return eq(this,a,[],[])},extend:function(a){var b=function(a){if(void 0!==a)for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b])};return b.create=function(a){return new this(a)},b.extend=this.extend,b.prototype=new this(a),b.prototype.constructor=b,b},into:function(a){return a.merge(this),this},merge:function(a){for(var b in a)a.hasOwnProperty(b)&&(this[b]=a);return this},serialize:function(a,b){a=a||",",b=b||"=";var c=[];for(var d in this)this.hasOwnProperty(d)&&c.push(d+b+this[d]);return c.join(a)}},Object.prototype),patches({toCamelCase:function(){},isEmpty:function(){},repeat:function(){},parse:function(){},byteslength:function(){},clean:function(){},lines:function(){},truncate:function(){},pad:function(){},lpad:function(){},rpad:function(){},lrpad:function(){},strip:function(){},wrapHTML:function(){}},String.prototype)});